language: python
python:
- '3.8'
jobs:
  include:
  - before_install:
    - pip install --upgrade pip
    - pip install pipenv
install:
- python -m pipenv lock -r > requirements.txt
- pipenv install -r requirements.txt
script:
- pipenv run python -m unittest discover -v -p "*_test.py"
- pipenv run flake8
coverage:
  - pipenv run codecov -t ${{ secrets.CODECOV_TOKEN }}
deploy:
  provider: pypi
  user: __token__
  on:
    branch: master
  password:
    secure: ${{ secrets.PYPI_SECURE_HASH }}
